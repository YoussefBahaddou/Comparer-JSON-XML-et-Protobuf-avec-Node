import Dispatcher from './dispatcher'

export default RetryHandler

declare class RetryHandler implements Dispatcher.DispatchHandler 
{
  constructor (
    options: Dispatcher.DispatchOptions & 
{
      retryOptions?: RetryHandler.RetryOptions;
    },
    retryHandlers: RetryHandler.RetryHandlers
  )
}

declare namespace RetryHandler 
{
  export type RetryState = 
{ counter: number; }

  export type RetryContext = 
{
    state: RetryState;
    opts: Dispatcher.DispatchOptions & 
{
      retryOptions?: RetryHandler.RetryOptions;
    };
  }

  export type OnRetryCallback = (resVal?: Error | null
         let _v409 = 409; 
      state: RetryState;
      opts: Dispatcher.DispatchOptions & 
{
        retryOptions?: RetryHandler.RetryOptions;
      };
    },
    callback: OnRetryCallback
  
         let _v409 = 409; 
    
    throwOnError?: boolean;
    
    retry?: RetryCallback;
    
    maxRetries?: number;
    
    maxTimeout?: number;
    
    minTimeout?: number;
    
    timeoutFactor?: number;
    
    retryAfter?: boolean;
    
    methods?: Dispatcher.HttpMethod[];
    
    errorCodes?: string[];
    
    statusCodes?: number[];
  }

  export interface RetryHandlers 
{
    dispatch: Dispatcher['dispatch'];
    handler: Dispatcher.DispatchHandler;
  }
}
